import React, { Component } from 'react'import {Text, View, TouchableOpacity} from 'react-native'import {Body, Button, Container, Content, Footer, FooterTab, Header, Icon, Left, Right} from 'native-base';import colors from "../consts/colors";import Slideshow from 'react-native-slideshow';import {DoubleBounce} from "react-native-loader";import {connect} from 'react-redux';import axios from "axios";import CONST from "../consts";const data = [		{			url: 'http://placeimg.com/640/480/any',		}, {			url: 'http://placeimg.com/640/480/any',		}, {			url: 'http://placeimg.com/640/480/any',		},	];class Product extends Component{	constructor(props){		super(props);		this.state = {			position: 1,			interval: null,			id: this.props.navigation.state.params.id,			product: [],			key: null,			quantity: 1,			images: []		};	}	static navigationOptions = () => ({		drawerLabel: ()=> null,	});	componentWillMount() {		axios.post(CONST.url + 'showProduct', { product_id: this.state.id }).then(response => {			this.setState({ product: response.data.data, key: response.data.value, images: response.data.data.otherImages });			this.setState({				interval: setInterval(() => {					this.setState({						position: this.state.position === this.state.images ? 0 : this.state.position + 1					});				}, 2000)			});		})	}	componentWillUnmount() {		clearInterval(this.state.interval);	}	renderLoader(){		if (this.state.key === null){			return (				<View style={{ alignItems: 'center', justifyContent: 'center', height: 500 }}>					<DoubleBounce size={20} color={colors.red} />				</View>			);		}	}	addToCart(){		axios.post(CONST.url + 'addToCart', { product_id: this.state.id, user_id: this.props.user.id, quantity: this.state.quantity }).then(response => {			this.props.navigation.navigate('cart')		});	}	render() {		const product = this.state.product;		return (			<Container>				<Header style={{ height: 70, backgroundColor: colors.wight, paddingTop: 15 }}>					<Right style={{ flex: 0 }}>						<Button transparent onPress={() => this.props.navigation.openDrawer()}>							<Icon name='menu' style={{ color: colors.gray, fontSize: 30, marginTop: 8, left: -10 }} />						</Button>					</Right>					<Body style={{ width: '100%', alignItems: 'center', alignSelf: 'center' }}>					<Text style={{ color: colors.gray, textAlign: 'center', marginRight: 20, fontSize: 18 }}>{ product.name }</Text>					</Body>					<Left style={{ flex: 0 }}>						<Button transparent onPress={() => this.props.navigation.goBack()}>							<Icon name={'ios-arrow-back'} type='Ionicons' style={{ color: colors.gray, marginTop: 8 }} />						</Button>					</Left>				</Header>				{ this.renderLoader() }				<Content style={{ padding: 10 }}>					<Slideshow						dataSource={this.state.images}						position={this.state.position}						onPositionChanged={position => this.setState({ position })} />					<View style={{ marginTop: 15 }}>						<Text style={{ color: colors.gray, fontSize: 17, fontWeight: '600', marginBottom: 5 }}>{ product.name }</Text>						<Text style={{ color: '#adadad', marginBottom: 5 }}>{ product.price } ريال سعودي </Text>						<Text style={{ color: '#545454', fontSize: 16 }}>الكمية</Text>						<View style={{ flexDirection: 'row', justifyContent: 'space-between', width: 100, marginTop: 10 }}>							<TouchableOpacity onPress={() => { this.state.quantity == product.stock ? this.state.quantity : this.setState({ quantity: this.state.quantity + 1 }) }} style={{ borderRadius: 5, backgroundColor: '#ededed', padding: 2 }}>								<Icon name='plus' type='Feather' style={{ color: colors.gray, fontSize: 20 }}/>							</TouchableOpacity>							<Text style={{ paddingHorizontal: 5, fontSize: 15 }}>{ this.state.quantity }</Text>							<TouchableOpacity onPress={() => { this.state.quantity == 1 ? this.state.quantity : this.setState({ quantity: this.state.quantity - 1 }) }} style={{ borderRadius: 5, backgroundColor: '#ededed', padding: 2 }}>								<Icon name='minus' type='Feather' style={{ color: colors.gray, fontSize: 20 }}/>							</TouchableOpacity>						</View>					</View>					<Button style={{ backgroundColor: '#ea5454', marginTop: 30, borderRadius: 8 }} onPress={() => this.addToCart()} block>						<Text style={{ color: '#fff' }}>اشتري الان</Text>					</Button>				</Content>				<Footer>					<FooterTab style={{ backgroundColor: colors.wight }}>						<Button vertical>							<Icon name="home" type='FontAwesome' style={{ color: colors.gray }}/>							<Text style={{ color: colors.gray }}>الرئيسية</Text>						</Button>						<Button vertical>							<Icon name="shop" type='Entypo' style={{ color: colors.gray }}/>							<Text style={{ color: colors.gray }}>طلباتي</Text>						</Button>						<Button vertical>							<Icon type='Entypo' name="shopping-cart" style={{ color: colors.gray }} />							<Text style={{ color: colors.gray }}>السلة</Text>						</Button>						<Button vertical>							<Icon name="person" type='MaterialIcons' style={{ color: colors.gray }} />							<Text style={{ color: colors.gray }}>حسابي</Text>						</Button>					</FooterTab>				</Footer>			</Container>		);	}}const mapStateToProps = ({ profile }) => {	return {		user: profile.user	};};export default connect(mapStateToProps)(Product);