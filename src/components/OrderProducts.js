import React, { Component } from 'react';import {View, Text, Image, TouchableOpacity, Dimensions } from 'react-native';import { Button, Icon, Container, Header, Right, Body, Content, Footer, FooterTab, Left, Card, CardItem, Badge } from 'native-base';import { DoubleBounce } from 'react-native-loader';import CONST from "../consts";import axios from "axios/index";import colors from "../consts/colors";import connect from "react-redux/es/connect/connect";class OrderProducts extends Component{	constructor(props){		super(props);		this.state = {			products: [],			key: null,			orderId: this.props.navigation.state.params.id,		}	}	static navigationOptions = () => ({		drawerLabel: ()=> null	});	renderLoader(){		if (this.state.key === null){			return (				<View style={{ alignItems: 'center', justifyContent: 'center', height: 500 }}>					<DoubleBounce size={20} color={colors.red} />				</View>			);		}	}	componentWillMount(){		axios.post(CONST.url + 'billdetail', { order_id: this.state.orderId }).then(response => {			this.setState({ products: response.data.data, key: response.data.value });		});	}	render(){		return(			<Container>				<Header style={{ height: 70, backgroundColor: colors.wight, paddingTop: 15 }}>					<Right style={{ flex: 0 }}>						<Button transparent onPress={() => this.props.navigation.openDrawer()}>							<Icon name='menu' style={{ color: colors.gray, fontSize: 30, marginTop: 8, left: -10 }} />						</Button>					</Right>					<Body style={{ width: '100%', alignItems: 'center', alignSelf: 'center' }}>					<Text style={{ color: colors.gray, textAlign: 'center', marginRight: 20, fontSize: 18 }}>منتجات الطلب</Text>					</Body>					<Left style={{ flex: 0 }}>						<Button transparent onPress={() => this.props.navigation.goBack()}>							<Icon name={'ios-arrow-back'} type='Ionicons' style={{ color: colors.gray, marginTop: 8 }} />						</Button>					</Left>				</Header>				{ this.renderLoader() }				<Content style={{ paddingHorizontal: 10 }}>					<View>						{							this.state.products.map((product, i) => (								<Card key={i}>									<CardItem>										<Body onPress={() => this.props.navigation.navigate('product', { id: product.product_id })}>										<View>											<Image source={{ uri: product.logo }} resizeMode='center' style={{ width: 100, height: 100 }}/>										</View>										</Body>										<Body style={{ flex: 2, marginLeft: 20 }}>										<TouchableOpacity style={{ position: 'absolute', right: -15}}>											<Icon type='Entypo' name='cross' style={{ color: colors.gray }} />										</TouchableOpacity>										<View>											<Text onPress={() => this.props.navigation.navigate('product')} style={{ fontSize: 16, fontWeight: '400', color: colors.gray }}>{ product.product_name.substr(0, 25) + '...' }</Text>											<Text style={{ color: colors.gray }}>{ product.price } ريال سعودي</Text>											<Text style={{ color: '#545454', fontSize: 16, fontWeight: '400' }}>الكمية : { product.quantity }</Text>										</View>										</Body>									</CardItem>								</Card>							))						}						<View style={{ marginBottom: 10 }}>							<Button style={{ backgroundColor: '#ea5454', marginTop: 5, borderRadius: 8 }} onPress={() => this.props.navigation.navigate('location', { params: { orderId: this.state.orderId } })} block>								<Text style={{ color: '#fff' }}>اعادة الشراء من نفس التاجر</Text>							</Button>						</View>					</View>				</Content>				<Footer>					<FooterTab style={{ backgroundColor: colors.wight }}>						<Button vertical onPress={() => this.props.navigation.navigate('home')}>							<Icon name="home" type='FontAwesome' style={{ color: colors.gray }}/>							<Text style={{ color: colors.gray }}>الرئيسية</Text>						</Button>						<Button vertical style={{ backgroundColor: colors.lightgray }} onPress={() => this.props.navigation.navigate('orders')}>							<Icon name="shop" type='Entypo' style={{ color: colors.yellow }}/>							<Text style={{ color: colors.yellow }}>طلباتي</Text>						</Button>						<Button badge vertical onPress={() => this.props.navigation.navigate('cart')}>							<Badge style={{ width: 17, color: colors.red, left: -10, paddingTop: 0 }}><Text style={{ color: colors.wight, textAlign: 'center' }}>{ this.props.count }</Text></Badge>							<Icon type='Entypo' name="shopping-cart" style={{ color: colors.gray }} />							<Text style={{ color: colors.gray }}>السلة</Text>						</Button>						<Button vertical onPress={() => this.props.navigation.navigate('profile')}>							<Icon name="person" type='MaterialIcons' style={{ color: colors.gray }} />							<Text style={{ color: colors.gray }}>حسابي</Text>						</Button>					</FooterTab>				</Footer>			</Container>		)	}}const mapStateToProps = ({ profile, cart }) => {	return {		user: profile.user,		count: cart.count	};};export default connect(mapStateToProps)(OrderProducts);